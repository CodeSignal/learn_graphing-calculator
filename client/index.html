<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>CodeSignal CosmoPlot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Fonts (Work Sans) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Design System Foundations -->
  <link rel="stylesheet" href="./design-system/colors/colors.css">
  <link rel="stylesheet" href="./design-system/spacing/spacing.css">
  <link rel="stylesheet" href="./design-system/typography/typography.css">

  <!-- Design System Components -->
  <link rel="stylesheet" href="./design-system/components/button/button.css">
  <link rel="stylesheet" href="./design-system/components/boxes/boxes.css">
  <link rel="stylesheet" href="./design-system/components/input/input.css">
  <link rel="stylesheet" href="./design-system/components/numeric-slider/numeric-slider.css">
  <link rel="stylesheet" href="./design-system/components/dropdown/dropdown.css">
  <link rel="stylesheet" href="./design-system/components/tags/tags.css">
  <link rel="stylesheet" href="./design-system/components/modal/modal.css">
  <link rel="stylesheet" href="./design-system/components/icons/icons.css">

  <!-- KaTeX for LaTeX rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" crossorigin="anonymous">

  <!-- Application-specific styles -->
  <link rel="stylesheet" href="./app.css">
</head>

<body class="bespoke">
  <!-- Navigation Header -->
  <header class="header">
    <h1>CodeSignal CosmoPlot</h1>
    <div class="spacer"></div>
    <div id="status" class="status">Ready</div>
    <button id="btn-help" class="button button-text">Help</button>
  </header>

  <!-- Main Application Content -->
  <main class="main-layout" style="overflow: hidden;"> <!-- Prevent scrolling on main layout -->
    <aside id="sidebar" class="sidebar" style="width: 300px;">
      <!-- Sidebar Header -->
      <header class="sidebar-header">
        <button id="btn-toggle-sidebar" class="button button-secondary sidebar-toggle-btn" aria-label="Toggle sidebar">&lt;&lt;</button>
      </header>

      <!-- Expression List -->
      <section class="sidebar-section" style="flex: 1; overflow-y: auto; display: flex; flex-direction: column;">
        <div id="expression-list" style="flex: 1; overflow-y: auto;">
          <!-- Expressions will be injected here -->
          <button class="button button-tertiary" id="btn-add-expression"
            style="width: 100%; margin-top: var(--UI-Spacing-spacing-m);">
            + Add Expression
          </button>
        </div>
      </section>

    </aside>
    <div id="sidebar-resizer" class="sidebar-resizer"></div>

    <!-- Floating Toggle Button (shown when sidebar is collapsed) -->
    <button id="btn-floating-toggle-sidebar" class="button button-secondary sidebar-floating-toggle" aria-label="Show sidebar">&gt;&gt;</button>

    <div class="content-area" style="padding: 0; position: relative;">
      <!-- Toolbar for Canvas -->
      <div id="graph-toolbar"
        style="position: absolute; top: 1rem; right: 1rem; z-index: 10; display: flex; gap: 0.5rem;">
        <button class="button button-secondary" id="btn-home" aria-label="Reset View">⟲</button>
        <button class="button button-secondary" id="btn-zoom-in" aria-label="Zoom In">+</button>
        <button class="button button-secondary" id="btn-zoom-out" aria-label="Zoom Out">-</button>
      </div>

      <canvas id="graph-canvas" style="width: 100%; height: 100%; display: block;"></canvas>

      <!-- Trace / Cursor Info -->
      <div id="cursor-info"
        style="position: absolute; bottom: 1rem; left: 1rem; background: var(--Colors-Box-Background); padding: var(--UI-Spacing-spacing-s); border-radius: var(--UI-Radius-radius-m); box-shadow: var(--Colors-Shadow-Soft); pointer-events: none; opacity: 0.8; font-family: monospace;">
        x: 0.00, y: 0.00
      </div>
    </div>
  </main>

  <!-- Help Content Template (Hidden) -->
  <template id="help-content-template">
    <!-- Table of Contents Navigation -->
    <nav class="toc">
      <strong>Contents</strong>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#features">Key Features</a></li>
        <li><a href="#shortcuts">Shortcuts</a></li>
      </ul>
    </nav>

    <!-- Overview Section -->
    <section id="overview">
      <h2>Overview</h2>
      <p>CodeSignal CosmoPlot is a graphing calculator that allows you to visualize mathematical expressions. Enter mathematical expressions using <b>x</b> as the variable, and the graph will be rendered in real-time on the canvas.</p>
    </section>

    <!-- Getting Started Section -->
    <section id="getting-started">
      <h2>Getting Started</h2>
      <p>To begin graphing expressions:</p>
      <ol>
        <li>Click the <strong>+ Add Expression</strong> button in the sidebar</li>
        <li>Enter a mathematical expression using <code>x</code> as the variable</li>
        <li>The graph will automatically update as you type</li>
      </ol>

      <h3>Examples</h3>
      <p>Here are some example expressions you can try:</p>
      <ul>
        <li><code>sin(x)</code> - Sine wave</li>
        <li><code>x^2 + 5</code> - Parabola shifted up</li>
        <li><code>abs(x)</code> - Absolute value function</li>
      </ul>
    </section>

    <!-- Key Features Section -->
    <section id="features">
      <h2>Key Features</h2>

      <h3>Parameters</h3>
      <p>You can use variables like <code>a</code>, <code>b</code>, etc., to create interactive sliders. The graph will update automatically as you adjust the slider values.</p>
      <ul>
        <li><code>a * sin(b * x)</code> - Creates sliders for <code>a</code> (amplitude) and <code>b</code> (frequency)</li>
      </ul>
    </section>

    <!-- Shortcuts Section -->
    <section id="shortcuts">
      <h2>Shortcuts</h2>
      <ul>
        <li><strong>ESC</strong> - Close help modal</li>
      </ul>

      <h3>Mouse Controls</h3>
      <ul>
        <li><strong>Drag</strong> - Pan the graph</li>
        <li><strong>Scroll</strong> - Zoom in/out</li>
      </ul>

      <h3>Toolbar Buttons</h3>
      <ul>
        <li><strong>⟲</strong> - Reset view to initial position</li>
        <li><strong>+</strong> - Zoom in</li>
        <li><strong>-</strong> - Zoom out</li>
      </ul>
    </section>
  </template>

  <!-- Core Scripts -->
  <script type="module" src="./app.js"></script>
</body>

</html>